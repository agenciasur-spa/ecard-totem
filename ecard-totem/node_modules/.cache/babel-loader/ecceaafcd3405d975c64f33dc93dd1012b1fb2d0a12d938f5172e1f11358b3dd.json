{"ast":null,"code":"var _jsxFileName = \"/Users/mauricioojeda/Projects/agenciasur/bestado/ecard-totem/ecard-totem/src/components/Formulario.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from 'axios';\nimport { useForm } from \"react-hook-form\";\nimport { rutFormato, rutValidator } from \"./validators\";\nimport { QRCodeCanvas } from \"qrcode.react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Formulario = () => {\n  _s();\n  var _errors$rut, _errors$rut2, _errors$rut3;\n  const [successMsg, setSuccessMsg] = useState(\"\");\n  const [counter, setCounter] = useState(0);\n  const [response, setResponse] = useState(false);\n  const {\n    register,\n    formState: {\n      errors\n    },\n    handleSubmit,\n    reset\n  } = useForm();\n  const onSubmit = data => {\n    // https://my-json-server.typicode.com/maur-ojeda/Mockend/users\n    // https://github.com/maur-ojeda/Mockend/blob/main/db.json\n\n    setSuccessMsg(\"Consulta correcta\");\n    fetchUsers(data);\n    const interval = setInterval(() => {\n      setCounter(prevCounter => prevCounter + 1);\n    }, 1000);\n    setTimeout(() => {\n      alert('periodo de inactividad despues de 2 segundos');\n      setResponse(null);\n      setCounter(0);\n      clearInterval(interval);\n      setSuccessMsg(\"\");\n      reset();\n    }, 5000);\n    reset();\n  };\n  const fetchUsers = async rut => {\n    try {\n      const res = await axios.get(`https://my-json-server.typicode.com/maur-ojeda/Mockend/users`, {\n        headers: {\n          //'X-RapidAPI-Key': '4ee9424734msh8c05e0f6fde9c8cp1700f8jsn6b1ddc70a2d7',\n          //'X-RapidAPI-Host': 'andruxnet-random-famous-quotes.p.rapidapi.com'\n        },\n        params: {\n          nationalId: rut.rut\n        }\n      });\n      setResponse(res.data);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"row\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-10 offset-1 \",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card mt-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"card-title\",\n            children: \"Title\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"card-text\",\n            children: \"Text\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Counter: \", counter]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Formulario\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit(onSubmit),\n        children: [successMsg && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"success-msg\",\n          children: successMsg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 24\n        }, this), response && /*#__PURE__*/_jsxDEV(\"span\", {\n          children: response[0].name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 22\n        }, this), response ? /*#__PURE__*/_jsxDEV(QRCodeCanvas, {\n          id: \"qrCode\",\n          value: `https://stackoverflow.com/questions/39523040/concatenating-variables-and-strings-in-react/pepe=${response[0].token}`,\n          size: 600,\n          bgColor: \"#FFFFFF\",\n          level: \"H\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this) : '', /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Rut\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"rut\",\n            ...register('rut', {\n              required: true,\n              validate: {\n                rutFormato,\n                rutValidator\n              }\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 17\n          }, this), ((_errors$rut = errors.rut) === null || _errors$rut === void 0 ? void 0 : _errors$rut.type) === \"required\" && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"errorMsg\",\n            children: \"Rut es requerido.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this), ((_errors$rut2 = errors.rut) === null || _errors$rut2 === void 0 ? void 0 : _errors$rut2.type) === \"rutFormato\" && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Formato no v\\xE1lido.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 56\n          }, this), ((_errors$rut3 = errors.rut) === null || _errors$rut3 === void 0 ? void 0 : _errors$rut3.type) === \"rutValidator\" && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Rut no v\\xE1lido.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 58\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            value: \"Enviar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: () => setResponse(null),\n            children: \"Limpiar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 12\n  }, this);\n};\n_s(Formulario, \"PjxhpHOV8xF2YQSVM/hSDURkgR0=\", false, function () {\n  return [useForm];\n});\n_c = Formulario;\nexport default Formulario;\nvar _c;\n$RefreshReg$(_c, \"Formulario\");","map":{"version":3,"names":["React","useState","useEffect","axios","useForm","rutFormato","rutValidator","QRCodeCanvas","Formulario","successMsg","setSuccessMsg","counter","setCounter","response","setResponse","register","formState","errors","handleSubmit","reset","onSubmit","data","fetchUsers","interval","setInterval","prevCounter","setTimeout","alert","clearInterval","rut","res","get","headers","params","nationalId","err","console","log","name","token","required","validate","type"],"sources":["/Users/mauricioojeda/Projects/agenciasur/bestado/ecard-totem/ecard-totem/src/components/Formulario.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from 'axios';\nimport { useForm } from \"react-hook-form\";\nimport { rutFormato, rutValidator } from \"./validators\";\nimport { QRCodeCanvas } from \"qrcode.react\";\n\n\n\n\nconst Formulario  = () => {\n    const [successMsg, setSuccessMsg] = useState(\"\");\n    const [counter, setCounter] = useState(0);\n    const [response, setResponse] = useState(false);\n    const {register, formState:{errors}, handleSubmit, reset } = useForm();\n    \n    const onSubmit = (data) => {\n        // https://my-json-server.typicode.com/maur-ojeda/Mockend/users\n        // https://github.com/maur-ojeda/Mockend/blob/main/db.json\n\n        setSuccessMsg(\"Consulta correcta\");\n        fetchUsers(data)\n\n\n    const interval =   setInterval(() => {\n            setCounter((prevCounter) => prevCounter + 1);\n          }, 1000);\n      \n\n\n        setTimeout(() => {\n            alert('periodo de inactividad despues de 2 segundos');    \n            setResponse(null)\n            setCounter(0)\n            clearInterval(interval);\n            setSuccessMsg(\"\");\n            reset();    \n          }, 5000);\n\n\n        reset();\n    };\n\n\n    \n\n    const fetchUsers = async rut => {\n\t\ttry {\n\t\t\tconst res = await axios.get(\n                `https://my-json-server.typicode.com/maur-ojeda/Mockend/users`,\n                {\n                    headers: {\n                        //'X-RapidAPI-Key': '4ee9424734msh8c05e0f6fde9c8cp1700f8jsn6b1ddc70a2d7',\n                        //'X-RapidAPI-Host': 'andruxnet-random-famous-quotes.p.rapidapi.com'\n                    },\n                    params: {\n                        nationalId: rut.rut\n                    },\n                }\n\n                );\n\t\t\tsetResponse(res.data);\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t}\n\t};\n\n    return <div className=\"row\">\n\n        <div className=\"col-10 offset-1 \">\n\n\n        <div className=\"card mt-3\">\n      \n      <div className=\"card-body\">\n        <h4 className=\"card-title\">Title</h4>\n        <p className=\"card-text\">Text</p>\n      </div>\n    </div>\n\n\n        \n\n            <h1>Counter: {counter}</h1>\n            <h2>Formulario</h2>\n        \n\n        <form onSubmit={handleSubmit(onSubmit)}>\n        \n        {successMsg && <p className=\"success-msg\">{successMsg}</p>}\n    \n        {response && <span>{response[0].name}</span> }\n        {response ? <QRCodeCanvas id=\"qrCode\" value={`https://stackoverflow.com/questions/39523040/concatenating-variables-and-strings-in-react/pepe=${ response[0].token }`} size={600}bgColor={\"#FFFFFF\"} level={\"H\"}/> : ''}\n\n\n            <div>\n                <label>Rut</label>\n                <input type=\"text\" name=\"rut\" {...register('rut', {required: true,  validate: { rutFormato, rutValidator }})}/>\n                {errors.rut?.type === \"required\" && (\n            <p className=\"errorMsg\">Rut es requerido.</p>\n          )}\n                {errors.rut?.type === \"rutFormato\" && (<p>Formato no válido.</p>)}\n                {errors.rut?.type === \"rutValidator\" && (<p>Rut no válido.</p>)}\n                \n            </div>  \n\n            <div>\n                <input type=\"submit\" value=\"Enviar\"/>\n\n                <button type=\"button\" onClick={() => setResponse(null)}>Limpiar</button>\n            </div>\n            \n\n        \n        \n        </form>\n\n       \n\n        </div>\n\n\n     \n    </div>\n}\nexport default Formulario;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}