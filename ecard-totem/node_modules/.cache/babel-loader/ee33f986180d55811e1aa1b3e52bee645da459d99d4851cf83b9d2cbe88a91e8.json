{"ast":null,"code":"var _jsxFileName = \"/Users/mauricioojeda/Projects/agenciasur/bestado/ecard-totem/ecard-totem/src/components/Formulario.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from 'axios';\nimport { useForm } from \"react-hook-form\";\nimport { rutFormato, rutValidator } from \"./validators\";\nimport { QRCodeCanvas } from \"qrcode.react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Formulario = () => {\n  _s();\n  var _errors$rut, _errors$rut2, _errors$rut3;\n  const [successMsg, setSuccessMsg] = useState(\"\");\n  const [counter, setCounter] = useState(0);\n  const [response, setResponse] = useState(false);\n  const {\n    register,\n    formState: {\n      errors\n    },\n    handleSubmit,\n    reset\n  } = useForm();\n  const onSubmit = data => {\n    // https://my-json-server.typicode.com/maur-ojeda/Mockend/users\n    // https://github.com/maur-ojeda/Mockend/blob/main/db.json\n\n    setSuccessMsg(\"Consulta correcta\");\n    fetchUsers(data);\n    const interval = setInterval(() => {\n      setCounter(prevCounter => prevCounter + 1);\n    }, 1000);\n    setTimeout(() => {\n      alert('periodo de inactividad despues de 2 segundos');\n      setResponse(null);\n      setCounter(0);\n      clearInterval(interval);\n      setSuccessMsg(\"\");\n      reset();\n    }, 5000);\n    reset();\n  };\n  const fetchUsers = async rut => {\n    try {\n      const res = await axios.get(`https://my-json-server.typicode.com/maur-ojeda/Mockend/users`, {\n        headers: {\n          //'X-RapidAPI-Key': '4ee9424734msh8c05e0f6fde9c8cp1700f8jsn6b1ddc70a2d7',\n          //'X-RapidAPI-Host': 'andruxnet-random-famous-quotes.p.rapidapi.com'\n        },\n        params: {\n          nationalId: rut.rut\n        }\n      });\n      setResponse(res.data);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"row\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-6 offset-3\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card mt-3 shadow-lg \",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"card-title d-none\",\n            children: \"Ingrese su RUN\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"text-muted\",\n            children: [\"Tiempo de inactividad: \", counter]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            className: \"form-inline-\",\n            onSubmit: handleSubmit(onSubmit),\n            children: [successMsg && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"success-msg\",\n              children: successMsg\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 24\n            }, this), response && /*#__PURE__*/_jsxDEV(\"span\", {\n              children: response[0].name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 22\n            }, this), response ? /*#__PURE__*/_jsxDEV(QRCodeCanvas, {\n              id: \"qrCode\",\n              value: `https://stackoverflow.com/questions/39523040/concatenating-variables-and-strings-in-react/pepe=${response[0].token}`,\n              size: 600,\n              bgColor: \"#FFFFFF\",\n              level: \"H\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 21\n            }, this) : '', /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label-lg\",\n                children: \"Ingrese su Run\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-control form-control-lg\",\n                type: \"text\",\n                name: \"rut\",\n                ...register('rut', {\n                  required: true,\n                  validate: {\n                    rutFormato,\n                    rutValidator\n                  }\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 17\n              }, this), ((_errors$rut = errors.rut) === null || _errors$rut === void 0 ? void 0 : _errors$rut.type) === \"required\" && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"errorMsg\",\n                children: \"Rut es requerido.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 13\n              }, this), ((_errors$rut2 = errors.rut) === null || _errors$rut2 === void 0 ? void 0 : _errors$rut2.type) === \"rutFormato\" && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Formato no v\\xE1lido.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 56\n              }, this), ((_errors$rut3 = errors.rut) === null || _errors$rut3 === void 0 ? void 0 : _errors$rut3.type) === \"rutValidator\" && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Rut no v\\xE1lido.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 58\n              }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                id: \"emailHelp\",\n                className: \"form-text text-muted\",\n                children: \"Sin puntos y con gui\\xF3n ejemplo: 9999999-9\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"btn btn-warning\",\n                type: \"submit\",\n                value: \"Enviar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 112,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => setResponse(null),\n                children: \"Limpiar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 12\n  }, this);\n};\n_s(Formulario, \"PjxhpHOV8xF2YQSVM/hSDURkgR0=\", false, function () {\n  return [useForm];\n});\n_c = Formulario;\nexport default Formulario;\nvar _c;\n$RefreshReg$(_c, \"Formulario\");","map":{"version":3,"names":["React","useState","useEffect","axios","useForm","rutFormato","rutValidator","QRCodeCanvas","Formulario","successMsg","setSuccessMsg","counter","setCounter","response","setResponse","register","formState","errors","handleSubmit","reset","onSubmit","data","fetchUsers","interval","setInterval","prevCounter","setTimeout","alert","clearInterval","rut","res","get","headers","params","nationalId","err","console","log","name","token","required","validate","type"],"sources":["/Users/mauricioojeda/Projects/agenciasur/bestado/ecard-totem/ecard-totem/src/components/Formulario.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from 'axios';\nimport { useForm } from \"react-hook-form\";\nimport { rutFormato, rutValidator } from \"./validators\";\nimport { QRCodeCanvas } from \"qrcode.react\";\n\n\n\n\nconst Formulario  = () => {\n    const [successMsg, setSuccessMsg] = useState(\"\");\n    const [counter, setCounter] = useState(0);\n    const [response, setResponse] = useState(false);\n    const {register, formState:{errors}, handleSubmit, reset } = useForm();\n    \n    const onSubmit = (data) => {\n        // https://my-json-server.typicode.com/maur-ojeda/Mockend/users\n        // https://github.com/maur-ojeda/Mockend/blob/main/db.json\n\n        setSuccessMsg(\"Consulta correcta\");\n        fetchUsers(data)\n\n\n    const interval =   setInterval(() => {\n            setCounter((prevCounter) => prevCounter + 1);\n          }, 1000);\n      \n\n\n        setTimeout(() => {\n            alert('periodo de inactividad despues de 2 segundos');    \n            setResponse(null)\n            setCounter(0)\n            clearInterval(interval);\n            setSuccessMsg(\"\");\n            reset();    \n          }, 5000);\n\n\n        reset();\n    };\n\n\n    \n\n    const fetchUsers = async rut => {\n\t\ttry {\n\t\t\tconst res = await axios.get(\n                `https://my-json-server.typicode.com/maur-ojeda/Mockend/users`,\n                {\n                    headers: {\n                        //'X-RapidAPI-Key': '4ee9424734msh8c05e0f6fde9c8cp1700f8jsn6b1ddc70a2d7',\n                        //'X-RapidAPI-Host': 'andruxnet-random-famous-quotes.p.rapidapi.com'\n                    },\n                    params: {\n                        nationalId: rut.rut\n                    },\n                }\n\n                );\n\t\t\tsetResponse(res.data);\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t}\n\t};\n\n    return <div className=\"row\">\n\n        <div className=\"col-6 offset-3\">\n\n\n        <div className=\"card mt-3 shadow-lg \">\n      \n      <div className=\"card-body\">\n        <h4 className=\"card-title d-none\">Ingrese su RUN</h4>\n\n\n\n        \n\n\n\n\n\n  \n        <h6 className=\"text-muted\">Tiempo de inactividad: {counter}</h6>\n    \n        <form className=\"form-inline-\" onSubmit={handleSubmit(onSubmit)}>\n        \n        {successMsg && <p className=\"success-msg\">{successMsg}</p>}\n    \n        {response && <span>{response[0].name}</span> }\n        {response ? <QRCodeCanvas id=\"qrCode\" value={`https://stackoverflow.com/questions/39523040/concatenating-variables-and-strings-in-react/pepe=${ response[0].token }`} size={600}bgColor={\"#FFFFFF\"} level={\"H\"}/> : ''}\n\n\n   \n\n\n            <div className=\"form-group\">\n                <label className=\"form-label-lg\">Ingrese su Run</label>\n                <input className=\"form-control form-control-lg\"  type=\"text\" name=\"rut\" {...register('rut', {required: true,  validate: { rutFormato, rutValidator }})}/>\n                {errors.rut?.type === \"required\" && (\n            <p className=\"errorMsg\">Rut es requerido.</p>\n          )}\n                {errors.rut?.type === \"rutFormato\" && (<p>Formato no válido.</p>)}\n                {errors.rut?.type === \"rutValidator\" && (<p>Rut no válido.</p>)}\n                \n                <small id=\"emailHelp\" className=\"form-text text-muted\">Sin puntos y con guión ejemplo: 9999999-9</small>\n            </div>  \n\n            <div>\n                <input className=\"btn btn-warning\" type=\"submit\" value=\"Enviar\"/>\n\n                <button type=\"button\" onClick={() => setResponse(null)}>Limpiar</button>\n            </div>\n            \n\n        \n        \n        </form>\n\n\n\n      </div>\n    </div>\n\n\n        \n\n\n       \n\n        </div>\n\n\n     \n    </div>\n}\nexport default Formulario;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}