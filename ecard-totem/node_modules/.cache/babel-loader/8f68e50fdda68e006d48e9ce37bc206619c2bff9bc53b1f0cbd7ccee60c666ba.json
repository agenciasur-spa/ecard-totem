{"ast":null,"code":"import _objectSpread from\"/Users/mauricioojeda/Projects/agenciasur/bestado/ecard-totem/ecard-totem/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/mauricioojeda/Projects/agenciasur/bestado/ecard-totem/ecard-totem/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mauricioojeda/Projects/agenciasur/bestado/ecard-totem/ecard-totem/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/mauricioojeda/Projects/agenciasur/bestado/ecard-totem/ecard-totem/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import axios from'axios';import{useForm}from\"react-hook-form\";import{rutFormato,rutValidator}from\"./validators\";import{QRCodeCanvas}from\"qrcode.react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Formulario=function Formulario(){var _errors$rut,_errors$rut2,_errors$rut3;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),successMsg=_useState2[0],setSuccessMsg=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),counter=_useState4[0],setCounter=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),response=_useState6[0],setResponse=_useState6[1];var _useForm=useForm(),register=_useForm.register,errors=_useForm.formState.errors,handleSubmit=_useForm.handleSubmit,reset=_useForm.reset;var onSubmit=function onSubmit(data){// https://my-json-server.typicode.com/maur-ojeda/Mockend/users\n// https://github.com/maur-ojeda/Mockend/blob/main/db.json\nsetSuccessMsg(\"Consulta correcta\");fetchUsers(data);var interval=setInterval(function(){setCounter(function(prevCounter){return prevCounter+1;});},1000);setTimeout(function(){alert('periodo de inactividad despues de 2 segundos');setResponse(null);setCounter(0);clearInterval(interval);setSuccessMsg(\"\");reset();},5000);reset();};var fetchUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(rut){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"https://my-json-server.typicode.com/maur-ojeda/Mockend/users\",{headers:{//'X-RapidAPI-Key': '4ee9424734msh8c05e0f6fde9c8cp1700f8jsn6b1ddc70a2d7',\n//'X-RapidAPI-Host': 'andruxnet-random-famous-quotes.p.rapidapi.com'\n},params:{nationalId:rut.rut}});case 3:res=_context.sent;setResponse(res.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchUsers(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"form\",{className:\"form-inline-\",onSubmit:handleSubmit(onSubmit),children:[successMsg&&/*#__PURE__*/_jsx(\"p\",{className:\"success-msg\",children:successMsg}),response&&/*#__PURE__*/_jsx(\"span\",{children:response[0].name}),response?/*#__PURE__*/_jsx(QRCodeCanvas,{id:\"qrCode\",value:\"https://stackoverflow.com/questions/39523040/concatenating-variables-and-strings-in-react/pepe=\".concat(response[0].token),size:300,bgColor:\"#FFFFFF\",level:\"H\"}):'',/*#__PURE__*/_jsx(\"p\",{children:\"Ingrese su RUN \"}),/*#__PURE__*/_jsxs(\"h6\",{className:\"text-muted\",children:[\"Tiempo de inactividad: \",counter]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-outline mb-4\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({className:\"form-control form-control-lg\",type:\"text\",name:\"rut\"},register('rut',{required:true,validate:{rutFormato:rutFormato,rutValidator:rutValidator}}))),/*#__PURE__*/_jsx(\"small\",{id:\"emailHelp\",className:\"form-text text-muted\",children:\"Sin puntos y con gui\\xF3n ejemplo: 9999999-9\"}),((_errors$rut=errors.rut)===null||_errors$rut===void 0?void 0:_errors$rut.type)===\"required\"&&/*#__PURE__*/_jsx(\"p\",{className:\"errorMsg text-danger\",children:\"Ingreso de Run es requerido.\"}),((_errors$rut2=errors.rut)===null||_errors$rut2===void 0?void 0:_errors$rut2.type)===\"rutFormato\"&&/*#__PURE__*/_jsx(\"p\",{className:\"errorMsg text-danger\",children:\"El Formato ingresado no es v\\xE1lido.\"}),((_errors$rut3=errors.rut)===null||_errors$rut3===void 0?void 0:_errors$rut3.type)===\"rutValidator\"&&/*#__PURE__*/_jsx(\"p\",{children:\"El Run ingresado no es v\\xE1lido.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center pt-1 mb-5 pb-1\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-block fa-lg gradient-custom-2 mb-3\",type:\"submit\",children:\"Enviar\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-muted\",type:\"button\",onClick:function onClick(){return setResponse(null);},children:\"Limpiar formulario\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center justify-content-center pb-4\",children:/*#__PURE__*/_jsx(\"small\",{children:\"Si tiene problemas Lorem ipsum dolor, sit amet consectetur adipisicing elit. \"})})]});};export default Formulario;","map":{"version":3,"names":["React","useState","useEffect","axios","useForm","rutFormato","rutValidator","QRCodeCanvas","Formulario","successMsg","setSuccessMsg","counter","setCounter","response","setResponse","register","errors","formState","handleSubmit","reset","onSubmit","data","fetchUsers","interval","setInterval","prevCounter","setTimeout","alert","clearInterval","rut","get","headers","params","nationalId","res","console","log","name","token","required","validate","type"],"sources":["/Users/mauricioojeda/Projects/agenciasur/bestado/ecard-totem/ecard-totem/src/components/Formulario.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from 'axios';\nimport { useForm } from \"react-hook-form\";\nimport { rutFormato, rutValidator } from \"./validators\";\nimport { QRCodeCanvas } from \"qrcode.react\";\n\n\n\n\nconst Formulario  = () => {\n    const [successMsg, setSuccessMsg] = useState(\"\");\n    const [counter, setCounter] = useState(0);\n    const [response, setResponse] = useState(false);\n    const {register, formState:{errors}, handleSubmit, reset } = useForm();\n    \n    const onSubmit = (data) => {\n        // https://my-json-server.typicode.com/maur-ojeda/Mockend/users\n        // https://github.com/maur-ojeda/Mockend/blob/main/db.json\n\n        setSuccessMsg(\"Consulta correcta\");\n        fetchUsers(data)\n\n\n    const interval =   setInterval(() => {\n            setCounter((prevCounter) => prevCounter + 1);\n          }, 1000);\n      \n\n\n        setTimeout(() => {\n            alert('periodo de inactividad despues de 2 segundos');    \n            setResponse(null)\n            setCounter(0)\n            clearInterval(interval);\n            setSuccessMsg(\"\");\n            reset();    \n          }, 5000);\n\n\n        reset();\n    };\n\n\n    \n\n    const fetchUsers = async rut => {\n\t\ttry {\n\t\t\tconst res = await axios.get(\n                `https://my-json-server.typicode.com/maur-ojeda/Mockend/users`,\n                {\n                    headers: {\n                        //'X-RapidAPI-Key': '4ee9424734msh8c05e0f6fde9c8cp1700f8jsn6b1ddc70a2d7',\n                        //'X-RapidAPI-Host': 'andruxnet-random-famous-quotes.p.rapidapi.com'\n                    },\n                    params: {\n                        nationalId: rut.rut\n                    },\n                }\n\n                );\n\t\t\tsetResponse(res.data);\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t}\n\t};\n\n    return(\n\n        <form className=\"form-inline-\" onSubmit={handleSubmit(onSubmit)}>\n        \n        {successMsg && <p className=\"success-msg\">{successMsg}</p>}\n    \n        {response && <span>{response[0].name}</span> }\n        {response ? <QRCodeCanvas id=\"qrCode\" value={`https://stackoverflow.com/questions/39523040/concatenating-variables-and-strings-in-react/pepe=${ response[0].token }`} size={300} bgColor={\"#FFFFFF\"} level={\"H\"}/> : ''}\n\n\n   \n        <p>Ingrese su RUN </p>\n\n        <h6 className=\"text-muted\">Tiempo de inactividad: {counter}</h6>\n\n        <div className=\"form-outline mb-4\">\n                \n                <input className=\"form-control form-control-lg\"  type=\"text\" name=\"rut\" {...register('rut', {required: true,  validate: { rutFormato, rutValidator }})}/>\n                <small id=\"emailHelp\" className=\"form-text text-muted\">Sin puntos y con guión ejemplo: 9999999-9</small>\n\n                {errors.rut?.type === \"required\" && (<p className=\"errorMsg text-danger\">Ingreso de Run es requerido.</p>)}\n                {errors.rut?.type === \"rutFormato\" && (<p className=\"errorMsg text-danger\">El Formato ingresado no es válido.</p>)}\n                {errors.rut?.type === \"rutValidator\" && (<p>El Run ingresado no es válido.</p>)}\n                \n        </div>  \n\n        \n    \n                   \n  \n                    <div className=\"text-center pt-1 mb-5 pb-1\">\n                      <button className=\"btn btn-primary btn-block fa-lg gradient-custom-2 mb-3\" type=\"submit\">Enviar</button>\n                    \n                        <button  className=\"btn btn-outline-muted\" type=\"button\" onClick={() => setResponse(null)}>Limpiar formulario</button>\n\n                    </div>\n  \n\n                    <div className=\"d-flex align-items-center justify-content-center pb-4\">\n                      \n                      <small>Si tiene problemas Lorem ipsum dolor, sit amet consectetur adipisicing elit. </small>\n                    </div>\n\n        \n        </form>\n)\n}\nexport default Formulario;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}